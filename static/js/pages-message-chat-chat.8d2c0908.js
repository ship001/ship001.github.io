(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-message-chat-chat"],{1301:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".container[data-v-914b2c4c]{width:100vw;height:100vh;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column}.tui-chatroom-navigatorbar[data-v-914b2c4c]{position:relative;\r\n\t/*top: 0;*/flex-shrink:0;width:%?750?%;height:%?90?%;background-color:#006eff}.tui-chatroom-navigatorbar-back[data-v-914b2c4c]{position:absolute;width:%?48?%;height:%?48?%;left:%?24?%;bottom:%?20?%}.conversation-title[data-v-914b2c4c]{position:absolute;width:%?350?%;height:%?88?%;line-height:%?56?%;font-size:%?36?%;color:#fff;z-index:100;bottom:0;left:%?200?%;display:flex;justify-content:center;align-items:center}.message-list[data-v-914b2c4c]{flex:1;width:100vw;overflow-y:scroll}.message-input[data-v-914b2c4c]{flex-shrink:var(--window-bottom);width:100%}.calling[data-v-914b2c4c]{position:fixed;z-index:199;top:0;\r\ntop:calc(%?88?% + constant(safe-area-inset-top));top:calc(%?88?% + env(safe-area-inset-top));\r\nbottom:0;right:0}.group-profile[data-v-914b2c4c]{top:%?176?%;left:0;z-index:1111}\r\n\r\n/* .container-box {\r\n\tposition: fixed;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\ttop: 0;\r\n\tbackground-color: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.video-message {\r\n\twidth: 90vw;\r\n\theight: 300px;\r\n} */",""]),e.exports=t},"131f":function(e,t,a){"use strict";function n(e){if("string"==typeof e)try{var t=JSON.parse(e);return!("object"!=typeof t||!t)}catch(a){return!1}}function i(){var e=navigator.userAgent,t=e.indexOf("Opera")>-1;if(t)return"Opera";var a=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t,n=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(n)return"IE11";if(a){var i=new RegExp("MSIE (\\d+\\.\\d+);");i.test(e);var o=parseFloat(RegExp["$1"]);return 7==o?"IE7":8==o?"IE8":9==o?"IE9":10==o?"IE10":"IE"}var s=e.indexOf("Edge")>-1;if(s)return"Edge";var r=e.indexOf("Firefox")>-1;if(r)return"Firefox";var c=e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome");if(c)return"Safari";var d=e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1&&-1==e.indexOf("Edge");if(d)return"Chrome";var u=e.indexOf("UBrowser")>-1;if(u)return"UC";e.indexOf("QQBrowser");return u?"QQ":""}a("c975"),a("acd8"),a("4d63"),a("ac1f"),a("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.isJSON=n,t.getBrowserType=i},"1c58":function(e,t,a){"use strict";a.r(t);var n=a("1f06"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"1f06":function(e,t,a){"use strict";a("4160"),a("c975"),a("d3b7"),a("acd8"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{isUserMedia:!1,stream:null,audio:null,recorder:null,chunks:[],startTime:0}},mounted:function(){if(-1===origin.indexOf("https"))throw this.$emit("error","100"),"请在 https 环境中使用本插件。";if(!navigator.mediaDevices||!window.MediaRecorder)throw this.$emit("error","101"),"当前浏览器不支持";this.getRecorderManager()},methods:{getRecorderManager:function(){var e=this;this.audio=document.createElement("audio"),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.isUserMedia=!0,t.getTracks().forEach((function(e){e.stop()}))})).catch((function(t){e.onErrorHandler(t)}))},start:function(){var e=this;if(!this.isUserMedia)return console.log("设备不支持");navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.startTime=(new Date).getTime(),e.stream=t,e.recorder=new MediaRecorder(t),e.recorder.ondataavailable=e.getRecordingData,e.recorder.onstop=e.saveRecordingData,e.recorder.start()})).catch((function(t){e.onErrorHandler(t)}))},stop:function(){this.chunks=[],this.recorder&&this.recorder.stop(),this.stream&&this.stream.getTracks().forEach((function(e){e.stop()}))},getRecordingData:function(e){this.chunks.push(e.data)},saveRecordingData:function(){var e=new Blob(this.chunks,{type:"audio/mpeg"}),t=URL.createObjectURL(e),a=(new Date).getTime(),n=a-this.startTime;n=parseFloat(n/1e3);var i={data:e,duration:n,localUrl:t};this.$emit("success",i)},onErrorHandler:function(e){if(console.log(e),"NotAllowedError"===e.name)throw this.$emit("error","201"),"用户拒绝了当前的浏览器实例的访问请求";if("NotReadableError"===e.name)throw this.$emit("error","101"),"当前浏览器不支持";throw this.$emit("error","500"),"调用失败，原因不详"}},destroyed:function(){this.stop()}};t.default=n},2035:function(e,t,a){"use strict";var n=a("8be7"),i=a.n(n);i.a},"20be":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".audio-message[data-v-3d7c505c]{padding:%?10?% %?18?%;border-radius:2px 10px 10px 10px;border:1px solid #d9d9d9;display:flex}.audio-icon[data-v-3d7c505c]{width:28px;height:28px}.my-audio[data-v-3d7c505c]{border-radius:10px 2px 10px 10px;background:rgba(0,110,255,.1);border:1px solid rgba(0,110,255,.3);margin-right:%?10?%}.send-text[data-v-3d7c505c]{margin-left:%?10?%}.audio[data-v-3d7c505c]{\r\n\t/*border-radius: 2px 10px 10px 10px;*/height:%?60?%;font-family:PingFangSC-Medium;font-size:%?28?%;color:#000;line-height:%?28?%;display:flex;align-items:center;justify-content:flex-end}",""]),e.exports=t},"21c9":function(e,t,a){"use strict";var n=a("692c"),i=a.n(n);i.a},2201:function(e,t,a){"use strict";var n=a("4ea4");a("99af"),a("c975"),a("fb6a"),Object.defineProperty(t,"__esModule",{value:!0}),t.parseText=r,t.parseGroupSystemNotice=c,t.parseGroupTip=d,t.parseImage=u,t.parseVideo=l,t.parseAudio=f;var i=n(a("b85c")),o=a("ff2c"),s={MEMBER_JOIN:1,MEMBER_QUIT:2,MEMBER_KICKED_OUT:3,MEMBER_SET_ADMIN:4,MEMBER_CANCELED_ADMIN:5,GROUP_INFO_MODIFIED:6,MEMBER_INFO_MODIFIED:7};function r(e){var t=[],a=e.content,n=-1,i=-1;while(""!==a)switch(n=a.indexOf("["),i=a.indexOf("]"),n){case 0:if(-1===i)t.push({name:"span",text:a}),a="";else{var s=a.slice(0,i+1);o.emojiMap[s]?(t.push({name:"img",src:o.emojiUrl+o.emojiMap[s]}),a=a.substring(i+1)):(t.push({name:"span",text:"["}),a=a.slice(1))}break;case-1:t.push({name:"span",text:a}),a="";break;default:t.push({name:"span",text:a.slice(0,n)}),a=a.substring(n);break}return t}function c(e){var t,a=e.payload,n=a.groupProfile.name||a.groupProfile.groupID,i=a.groupProfile.groupID;switch(a.operationType){case 1:t="".concat(a.operatorID," 申请加入群组：").concat(n,"（群ID:").concat(i,")");break;case 2:t="成功加入群组：".concat(n," （群ID:").concat(i,")");break;case 3:t="申请加入群组：".concat(n," （群ID:").concat(i,")被拒绝");break;case 4:t="被管理员".concat(a.operatorID,"踢出群组：").concat(n,"（群ID:").concat(i,")");break;case 5:t="群：".concat(n," （群ID:").concat(i,")已被").concat(a.operatorID,"解散");break;case 6:t="我（用户ID:".concat(a.operatorID,"）成功创建群聊:").concat(n,"（群ID:").concat(i,")");break;case 7:t="用户ID：".concat(a.operatorID,"邀请你加群：").concat(n,"（群ID:").concat(i,")");break;case 8:t="你退出群组：".concat(n,"（群ID:").concat(i,")");break;case 9:t="你被".concat(a.operatorID,"设置为群：").concat(n,"（群ID:").concat(i,")的管理员");break;case 10:t="你被".concat(a.operatorID,"撤销群：").concat(n," （群ID:").concat(i,")的管理员身份");break;case 255:t="自定义群系统通知: ".concat(a.userDefinedField);break}return t}function d(e){var t,a,n=e.payload,o=e.nick||n.userIDList.join(",");switch(n.operationType){case s.MEMBER_JOIN:t="".concat(o," 加入群聊");break;case s.MEMBER_QUIT:t="群成员退群：".concat(o);break;case s.MEMBER_KICKED_OUT:t="群成员被踢：".concat(o);break;case s.MEMBER_SET_ADMIN:t="".concat(n.operatorID,"将 ").concat(o,"设置为管理员");break;case s.MEMBER_CANCELED_ADMIN:t="".concat(n.operatorID,"将 ").concat(o,"取消作为管理员");break;case s.GROUP_INFO_MODIFIED:t="群资料修改";break;case s.MEMBER_INFO_MODIFIED:var r,c=(0,i.default)(n.memberList);try{for(c.s();!(r=c.n()).done;){var d=r.value;t=d.muteTime>0?"群成员：".concat(d.userID,"被禁言").concat(d.muteTime,"秒"):"群成员：".concat(d.userID,"被取消禁言")}}catch(u){c.e(u)}finally{c.f()}break;case 256:a=e.nick||e.from,"无应答"===n.text&&(a=n.userIDList.join(",")),t="结束群聊"===n.text?"结束群聊":'"'.concat(a,'" ').concat(n.text);break}return[{name:"groupTip",text:t}]}function u(e){var t=[{name:"image",src:e.payload.imageInfoArray[0].url}];return t}function l(e){var t={name:"video",src:e.payload.videoUrl};return t}function f(e){var t={name:"audio",src:e.payload.url,second:0===e.payload.second?1:e.payload.second};return t}},"250b":function(e,t,a){"use strict";a.r(t);var n=a("c22a"),i=a("40d6");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("cb49");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"914b2c4c",null,!1,n["a"],s);t["default"]=c.exports},2651:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".TUI-ImageMessage[data-v-1db9bc80]{width:150px}.image-message-box[data-v-1db9bc80]{width:%?300?%}.image-message[data-v-1db9bc80]{width:100%;height:100%;border-radius:10px 10px 10px 10px}.my-image[data-v-1db9bc80]{border-radius:10px 2px 10px 10px;margin-right:%?10?%}.send-text[data-v-1db9bc80]{margin-left:%?10?%}",""]),e.exports=t},2653:function(e,t,a){var n=a("c819");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("6e1cddb5",n,!0,{sourceMap:!1,shadowMode:!1})},2763:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"TUI-ImageMessage",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}},[a("v-uni-view",{class:"image-message-box "+(e.isMine?"my-image":"send-text")},[a("v-uni-image",{staticClass:"image-message",attrs:{mode:"widthFix",src:e.imgUrl}})],1)],1)},o=[]},2820:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{class:"text-message "+(e.isMine?"my-text":"send-text")},e._l(e.renderDom,(function(t,n){return a("v-uni-view",{key:n,staticClass:"message-body-span"},["span"===t.name?a("span",{staticClass:"message-body-span-text"},[e._v(e._s(t.text))]):e._e(),"img"===t.name?a("v-uni-image",{staticClass:"emoji-icon",attrs:{src:t.src}}):e._e()],1)})),1)},o=[]},"2a53":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("2201"),i={data:function(){return{renderDom:[]}},components:{},props:{message:{type:Object},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({renderDom:(0,n.parseText)(e)})},immediate:!0,deep:!0}},methods:{}};t.default=i},"2b46":function(e,t,a){"use strict";a.r(t);var n=a("2820"),i=a("49dc");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("2035");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"6e30f972",null,!1,n["a"],s);t["default"]=c.exports},"2bbf":function(e,t,a){"use strict";a.r(t);var n=a("be4c"),i=a("1c58");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"5935b5e2",null,!1,n["a"],s);t["default"]=c.exports},"305d":function(e,t,a){var n=a("20be");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("1ac8fb73",n,!0,{sourceMap:!1,shadowMode:!1})},"311c":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".text-message[data-v-6e30f972]{display:inline-flex;max-width:60vw;line-height:%?52?%;padding:%?12?% %?24?%;background:#f8f8f8;border:1px solid #d9d9d9;border-radius:2px 10px 10px 10px}.my-text[data-v-6e30f972]{border-radius:10px 2px 10px 10px;border:1px solid rgba(0,110,255,.3);background:rgba(0,110,255,.1);margin-right:%?10?%}.send-text[data-v-6e30f972]{margin-left:%?10?%}.message-body-span[data-v-6e30f972]{display:flex;justify-content:center;align-items:center;\r\n\t/*justify-content: flex-start;*/flex-wrap:wrap;outline:none;font-size:%?28?%;color:#333;position:relative;max-width:60vw}.message-body-span-text[data-v-6e30f972]{width:100%;display:inline;word-wrap:break-word;word-break:break-all}.message-body-span-image[data-v-6e30f972]{display:inline-block;width:%?32?%;height:%?32?%;margin:0 %?4?%}.emoji-icon[data-v-6e30f972]{width:20px;height:20px}",""]),e.exports=t},"3c22":function(e,t,a){"use strict";a.r(t);var n=a("9348"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"40d6":function(e,t,a){"use strict";a.r(t);var n=a("eeea"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},4926:function(e,t,a){"use strict";var n=a("983e"),i=a.n(n);i.a},"49dc":function(e,t,a){"use strict";a.r(t);var n=a("2a53"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"4ab0":function(e,t,a){"use strict";a.r(t);var n=a("9172"),i=a("974b");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("58ea");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"3d7c505c",null,!1,n["a"],s);t["default"]=c.exports},5108:function(e,t,a){"use strict";a.r(t);var n=a("798a"),i=a("3c22");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("d0a9");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"1a5e3e07",null,!1,n["a"],s);t["default"]=c.exports},"58ea":function(e,t,a){"use strict";var n=a("305d"),i=a.n(n);i.a},6022:function(e,t,a){"use strict";var n=a("2653"),i=a.n(n);i.a},"692c":function(e,t,a){var n=a("2651");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("b4b5ef0a",n,!0,{sourceMap:!1,shadowMode:!1})},"6c01":function(e,t,a){"use strict";a.r(t);var n=a("fa0e"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},7408:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={shipAvatar:a("3dfa").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-scroll-view",{staticClass:"message-list-container",attrs:{"scroll-y":"true","scroll-into-view":e.scrollView,"refresher-enabled":!0,"scroll-top":e.scrollTop,"refresher-triggered":e.triggered},on:{refresherrefresh:function(t){arguments[0]=t=e.$handleEvent(t),e.refresh.apply(void 0,arguments)}}},[a("v-uni-view",{staticStyle:{width:"100%"},attrs:{id:"message-scroll"}},[e.isCompleted?a("v-uni-view",{staticClass:"no-message"},[e._v("没有更多啦")]):e._e(),e._l(e.messageList,(function(t,n){return a("v-uni-view",{key:n,staticClass:"t-message",staticStyle:{padding:"0 20rpx"}},[a("v-uni-view",{staticClass:"t-message-item"},[a("v-uni-view",{class:1===t.isMy?"t-self-message":"t-recieve-message"},[0===t.isMy?a("ship-avatar",{attrs:{src:t.avatar}}):e._e(),"C2C"===e.conversation.type&&"out"===t.flow?a("v-uni-view",{staticClass:"read-receipts"},[t.isPeerRead?a("v-uni-view",[e._v("已读")]):a("v-uni-view",[e._v("未读")])],1):e._e(),a("v-uni-view",["text"===t.format?a("TextMessage",{attrs:{message:t,isMine:1===t.isMy}}):e._e(),"image"===t.format?a("ImageMessage",{attrs:{message:t,isMine:1===t.isMy}}):e._e(),"video"===t.format?a("VideoMessage",{attrs:{message:t,isMine:1===t.isMy}}):e._e(),"audio"===t.format?a("AudioMessage",{attrs:{message:t,isMine:1===t.isMy}}):e._e()],1),1===t.isMy?a("ship-avatar",{attrs:{src:t.avatar}}):e._e()],1)],1)],1)}))],2)],1)},o=[]},"748a":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{imgUrl:""}},props:{message:{type:Object,default:""},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({imgUrl:this.$javaUrl+"/"+e.content})},immediate:!0,deep:!0}},methods:{previewImage:function(){var e=[];e.push(this.imgUrl),uni.previewImage({urls:e})}}};t.default=n},"74c4":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={mumuRecorder:a("2bbf").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("v-uni-view",{staticClass:"TUI-message-input-container"},[a("v-uni-view",{staticClass:"TUI-message-input"},[a("v-uni-image",{staticClass:"TUI-icon",attrs:{src:e.isAudio?"/static/static/assets/keyboard.svg":"/static/static/assets/audio.svg"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.switchAudio.apply(void 0,arguments)}}}),e.isAudio?a("v-uni-view",{staticClass:"TUI-message-input-main",staticStyle:{display:"flex","justify-content":"center","font-size":"32rpx","font-family":"PingFangSC-Regular"},on:{longpress:function(t){arguments[0]=t=e.$handleEvent(t),e.handleLongPress.apply(void 0,arguments)},touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.handleTouchMove.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=e.$handleEvent(t),e.handleTouchEnd.apply(void 0,arguments)}}},[a("v-uni-text",[e._v(e._s(e.text))])],1):a("v-uni-view",{staticClass:"TUI-message-input-main"},[a("v-uni-input",{staticClass:"TUI-message-input-area",attrs:{"adjust-position":!0,"cursor-spacing":"20",maxlength:"140",type:"text","placeholder-class":"input-placeholder",placeholder:"说点什么呢~"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.onInputValueChange.apply(void 0,arguments)},focus:function(t){arguments[0]=t=e.$handleEvent(t),e.inputBindFocus.apply(void 0,arguments)},blur:function(t){arguments[0]=t=e.$handleEvent(t),e.inputBindBlur.apply(void 0,arguments)}},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})],1),a("v-uni-view",{staticClass:"TUI-message-input-functions",attrs:{"hover-class":"none"}},[a("v-uni-image",{staticClass:"TUI-icon",attrs:{src:"/static/static/assets/face-emoji.svg"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleEmoji.apply(void 0,arguments)}}}),e.sendMessageBtn?a("v-uni-view",{staticClass:"TUI-sendMessage-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendTextMessage.apply(void 0,arguments)}}},[e._v("发送")]):a("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleExtensions.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"TUI-icon",attrs:{src:"/static/static/assets/more.svg"}})],1)],1)],1),"emoji"===e.displayFlag?a("v-uni-view",{staticClass:"TUI-Emoji-area"},[a("TUI-Emoji",{on:{enterEmoji:function(t){arguments[0]=t=e.$handleEvent(t),e.appendMessage.apply(void 0,arguments)}}})],1):e._e(),"extension"===e.displayFlag?a("v-uni-view",{staticClass:"TUI-Extensions"},[a("v-uni-view",{staticClass:"TUI-Extension-slot",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendImageMessage.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"TUI-Extension-icon",attrs:{src:"/static/static/assets/send-img.svg"}}),a("v-uni-view",{staticClass:"TUI-Extension-slot-name"},[e._v("发送图片")])],1),a("v-uni-view",{staticClass:"TUI-Extension-slot",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendVideoMessage.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"TUI-Extension-icon",attrs:{src:"/static/static/assets/send-video.svg"}}),a("v-uni-view",{staticClass:"TUI-Extension-slot-name"},[e._v("发送视频")])],1)],1):e._e()],1),a("mumu-recorder",{ref:"recorder",on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerRecorderSuccess.apply(void 0,arguments)},error:function(t){arguments[0]=t=e.$handleEvent(t),e.handlerRecorderError.apply(void 0,arguments)}}}),e.popupToggle?a("v-uni-view",{staticClass:"record-modal",on:{longpress:function(t){arguments[0]=t=e.$handleEvent(t),e.handleLongPress.apply(void 0,arguments)},touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.handleTouchMove.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=e.$handleEvent(t),e.handleTouchEnd.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"wrapper"},[a("v-uni-view",{staticClass:"modal-loading"})],1),a("v-uni-view",{staticClass:"modal-title"},[e._v(e._s(e.title))])],1):e._e()],1)},o=[]},"798a":function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{class:"video-box "+(e.isMine?"my-video":"send-video"),on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.playerHander.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"video-icon",attrs:{src:a("f813")}})],1)},o=[]},8486:function(e,t,a){var n=a("9b7f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("41fdda45",n,!0,{sourceMap:!1,shadowMode:!1})},"8be7":function(e,t,a){var n=a("311c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("181f692e",n,!0,{sourceMap:!1,shadowMode:!1})},"8dc6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={tabbar_websocket:"ws://47.109.33.174:8848/ship-api"};t.default=n},9172:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{class:"audio-message "+(e.isMine?"my-audio":"send-text")},[n("v-uni-image",{staticClass:"audio-icon",attrs:{src:a("e8a5")}}),n("v-uni-view",{staticClass:"audio ",style:"width: 120rpx",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handlePlayAudioMessage.apply(void 0,arguments)}}},[e._v(e._s('" '+e.message.duration))])],1)},o=[]},9348:function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("f813")),o={data:function(){return{isPlay:!1,videoIcon:i.default}},components:{},props:{message:{type:Object,default:function(){}},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({message:e})},immediate:!0,deep:!0}},methods:{playerHander:function(){var e=this.$javaUrl+"/"+this.message.content;uni.navigateTo({url:"/pages/customize/play-video?src=".concat(e)})},stopHander:function(){this.isPlay=!1}}};t.default=o},"96a7":function(e,t,a){"use strict";a.r(t);var n=a("748a"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"974b":function(e,t,a){"use strict";a.r(t);var n=a("dc61"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"983e":function(e,t,a){var n=a("d79b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("202764aa",n,!0,{sourceMap:!1,shadowMode:!1})},9960:function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=n(a("1da1")),o=n(a("b1d1")),s=n(a("f6d1")),r=n(a("4ba0")),c=n(a("2e38")),d={data:function(){return{userInfo:uni.getStorageSync("userInfo"),recorderManager:null,recorder:null,firstSendMessage:!0,inputText:"",extensionArea:!1,sendMessageBtn:!1,displayFlag:"",isAudio:!1,bottomVal:0,startPoint:0,popupToggle:!1,isRecording:!1,canSend:!0,text:"按住说话",title:" ",notShow:!1,isShow:!0,commonFunction:[{name:"常用语",key:"0"},{name:"发送订单",key:"1"},{name:"服务评价",key:"2"}],displayServiceEvaluation:!1,displayCommonWords:!1,displayOrderList:!1}},components:{TUIEmoji:o.default,TUICommonWords:s.default,TUIOrderList:r.default,TUIServiceEvaluation:c.default},beforeMount:function(){},methods:{handlerRecorderSuccess:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.canSend){a.next=2;break}return a.abrupt("return");case 2:if(n=e.duration,!(n<.5)){a.next=5;break}return a.abrupt("return");case 5:return i=e.data,a.next=8,t.$api.uploadFile(t.userInfo.id+"/chat",i);case 8:o=a.sent,0==o.code&&(s={format:"audio",content:o.message,duration:Math.round(n)},t.sendIMMessage(s));case 10:case"end":return a.stop()}}),a)})))()},handlerRecorderError:function(e){switch(e){case"101":uni.showModal({content:"当前浏览器版本较低，请更换浏览器使用，推荐在微信中打开。"});break;case"201":uni.showModal({content:"麦克风权限被拒绝，请刷新页面后授权麦克风权限。"});break;default:uni.showModal({content:"未知错误，请刷新页面重试"});break}},switchAudio:function(){this.setData({isAudio:!this.isAudio,text:"按住说话"})},handleLongPress:function(e){this.$refs.recorder.start(),this.setData({startPoint:e.touches[0],title:"正在录音",notShow:!0,isShow:!1,isRecording:!0,popupToggle:!0,canSend:!0})},handleTouchMove:function(e){this.isRecording&&this.startPoint.clientY-e.touches[e.touches.length-1].clientY>100&&this.setData({text:"抬起停止",title:"松开手指，取消发送",canSend:!1})},handleTouchEnd:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.setData({isRecording:!1,popupToggle:!1}),e.$refs.recorder.stop(),e.canSend||(e.text="按住说话");case 3:case"end":return t.stop()}}),t)})))()},handleEmoji:function(){var e="emoji";"emoji"===this.displayFlag&&(e=""),this.setData({displayFlag:e}),this.isAudio&&(this.isAudio=!1)},handleExtensions:function(){var e="extension";"extension"===this.displayFlag&&(e=""),this.setData({displayFlag:e})},sendImageMessage:function(){var e=this;uni.chooseImage({count:1,success:function(t){if(t){var a=t.tempFilePaths[0];e.$api.uploadFileUrl(e.userInfo.id+"/chat",a).then((function(t){if(0==t.code){var a={format:"image",content:t.message};e.sendIMMessage(a)}}))}}})},sendVideoMessage:function(){var e=this;uni.chooseVideo({maxDuration:30,camera:"back",success:function(t){console.log(t,"asdsad");var a=t.tempFilePath;e.$api.uploadFileUrl(e.userInfo.id+"/chat",a).then((function(t){if(0==t.code){var a={format:"video",content:t.message};e.sendIMMessage(a)}}))}})},appendMessage:function(e){this.isAudio&&(this.isAudio=!1),this.setData({inputText:this.inputText+e.detail.message,sendMessageBtn:!0})},sendTextMessage:function(){if(this.inputText){var e={format:"text",content:this.inputText};this.inputText="",this.sendMessageBtn=!1,this.sendIMMessage(e)}},onInputValueChange:function(e){e.detail.value?this.setData({sendMessageBtn:!0}):this.setData({sendMessageBtn:!1})},$handleSendTextMessage:function(e){this.sendTextMessage(e.detail.message,!0),this.setData({displayCommonWords:!1})},$handleCloseCards:function(e){switch(e.detail.key){case"0":this.setData({displayCommonWords:!1});break;case"1":this.setData({displayOrderList:!1});break;case"2":this.setData({displayServiceEvaluation:!1});break;default:break}},sendIMMessage:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$emit("sendMessage",e);case 1:case"end":return a.stop()}}),a)})))()},inputBindFocus:function(){console.log("占位：函数 inputBindFocus 未声明")},inputBindBlur:function(){this.sendTextMessage()}}};t.default=d},"9aa2":function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("d4ec")),o=n(a("bee2")),s=a("131f"),r=function(){function e(t){(0,i.default)(this,e),this.lockReconnect=!1,this.wsUrl="",this.globalCallback=null,this.userClose=!1,this.createWebSocket(t)}return(0,o.default)(e,[{key:"createWebSocket",value:function(e){if("undefined"===typeof WebSocket)return this.writeToScreen("您的浏览器不支持WebSocket，无法获取数据"),!1;this.wsUrl=e;try{this.ws=new WebSocket(this.wsUrl),this.initEventHandle()}catch(t){this.reconnect(e)}}},{key:"initEventHandle",value:function(){var e=this;this.ws.onopen=function(e){console.log("WebSocket连接打开")},this.ws.onclose=function(t){e.userClose||e.reconnect(e.wsUrl)},this.ws.onerror=function(t){e.userClose||e.reconnect(e.wsUrl)},this.ws.onmessage=function(t){if((0,s.isJSON)(t.data)){var a=JSON.parse(t.data);e.globalCallback(a)}else e.globalCallback(t.data)}}},{key:"reconnect",value:function(e){var t=this;this.lockReconnect||(this.ws.close(),this.lockReconnect=!0,setTimeout((function(){t.createWebSocket(e),t.lockReconnect=!1}),5e3))}},{key:"webSocketSendMsg",value:function(e){this.ws&&this.ws.send({data:e,success:function(){console.log("消息发送成功")},fail:function(e){console.log("关闭失败",e)}})}},{key:"getWebSocketMsg",value:function(e){this.globalCallback=e}},{key:"closeSocket",value:function(){this.ws&&(this.userClose=!0,this.ws.close({success:function(e){console.log("关闭成功",e)},fail:function(e){console.log("关闭失败",e)}}))}},{key:"writeToScreen",value:function(e){console.log(e)}}]),e}(),c=r;t.default=c},"9b7f":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".video-box[data-v-1a5e3e07]{width:%?260?%;height:%?160?%;background-color:rgba(0,0,0,.2);border-radius:%?20?% %?4?% %?20?% %?20?%;display:flex;justify-content:center;align-items:center}.my-video[data-v-1a5e3e07]{border-radius:%?20?% %?4?% %?20?% %?20?%;margin-right:%?10?%}.send-video[data-v-1a5e3e07]{margin-left:%?10?%}.icon[data-v-1a5e3e07]{position:absolute;bottom:%?60?%;right:%?60?%}.video-icon[data-v-1a5e3e07]{display:block;width:%?64?%;height:%?64?%}",""]),e.exports=t},a9f0:function(e,t,a){"use strict";a.r(t);var n=a("2763"),i=a("96a7");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("21c9");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"1db9bc80",null,!1,n["a"],s);t["default"]=c.exports},ace2:function(e,t,a){"use strict";a.r(t);var n=a("7408"),i=a("6c01");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("4926");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"ba72d52e",null,!1,n["a"],s);t["default"]=c.exports},be14:function(e,t,a){"use strict";a.r(t);var n=a("9960"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},be4c:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"recorder"})},o=[]},c22a:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={uNavbar:a("5e53").default,shipMessageList:a("ace2").default,shipMessageInput:a("c755").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("u-navbar",{attrs:{autoBack:!0,placeholder:!0}},[a("v-uni-view",{attrs:{slot:"center"},slot:"center"},[e._v(e._s(e.title))])],1),a("v-uni-view",{staticClass:"message-list",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.triggerClose.apply(void 0,arguments)}}},[a("ship-message-list",{ref:"messageList",attrs:{id:"message-list",conversation:e.conversation}})],1),a("v-uni-view",{staticClass:"message-input"},[a("ship-message-input",{on:{sendMessage:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMessage.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticStyle:{width:"100%",height:"90rpx","background-color":"#f1f1f1"}})],1)},o=[]},c755:function(e,t,a){"use strict";a.r(t);var n=a("74c4"),i=a("be14");for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("6022");var s,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"41aaaa34",null,!1,n["a"],s);t["default"]=c.exports},c819:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".TUI-message-input-container[data-v-41aaaa34]{background-color:#f1f1f1;padding-bottom:%?20?%}.TUI-message-input[data-v-41aaaa34]{display:flex;padding-bottom:%?16?%;background-color:#f1f1f1;width:100vw}.TUI-commom-function[data-v-41aaaa34]{display:flex;flex-wrap:nowrap;width:%?750?%;height:%?106?%;background-color:#f1f1f1;align-items:center}.TUI-commom-function-item[data-v-41aaaa34]{display:flex;width:%?136?%;justify-content:center;align-items:center;font-size:%?24?%;color:#fff;height:%?48?%;margin-left:%?16?%;border-radius:%?24?%;background-color:#00c8dc}.TUI-commom-function-item[data-v-41aaaa34]:first-child{margin-left:%?48?%}.TUI-message-input-functions[data-v-41aaaa34]{display:flex}.TUI-message-input-main[data-v-41aaaa34]{background-color:#fff;flex:1;height:%?66?%;margin:0 %?10?%;padding:0 %?5?%;border-radius:%?5?%;display:flex;align-items:center}.TUI-message-input-area[data-v-41aaaa34]{width:100%;height:100%}.TUI-icon[data-v-41aaaa34]{width:%?56?%;height:%?56?%;margin:0 %?16?%}.TUI-Extensions[data-v-41aaaa34]{display:flex;flex-wrap:wrap;width:100vw;height:%?450?%;margin-left:%?14?%;margin-right:%?14?%}.TUI-Extension-slot[data-v-41aaaa34]{width:%?128?%;height:%?170?%;margin-left:%?26?%;margin-right:%?26?%;margin-top:%?24?%}.TUI-Extension-icon[data-v-41aaaa34]{width:%?128?%;height:%?128?%}.TUI-sendMessage-btn[data-v-41aaaa34]{display:flex;align-items:center;margin:0 %?10?%}.TUI-Emoji-area[data-v-41aaaa34]{width:100vw;height:%?450?%}.TUI-Extension-slot-name[data-v-41aaaa34]{line-height:%?34?%;font-size:%?24?%;color:#333;letter-spacing:0;text-align:center}.record-modal[data-v-41aaaa34]{height:%?300?%;width:60vw;background-color:#000;opacity:.8;position:fixed;top:%?670?%;z-index:9999;left:20vw;border-radius:%?24?%;display:flex;flex-direction:column}.record-modal .wrapper[data-v-41aaaa34]{display:flex;height:%?200?%;box-sizing:border-box;padding:10vw}.record-modal .wrapper .modal-loading[data-v-41aaaa34]{opacity:1;width:%?40?%;height:%?16?%;border-radius:%?4?%;background-color:#006fff;-webkit-animation:loading-data-v-41aaaa34 2s cubic-bezier(.17,.37,.43,.67) infinite;animation:loading-data-v-41aaaa34 2s cubic-bezier(.17,.37,.43,.67) infinite}.modal-title[data-v-41aaaa34]{text-align:center;color:#fff}@-webkit-keyframes loading-data-v-41aaaa34{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translate(30vw);transform:translate(30vw);background-color:#f5634a;width:40px}100%{-webkit-transform:translate(0);transform:translate(0)}}@keyframes loading-data-v-41aaaa34{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translate(30vw);transform:translate(30vw);background-color:#f5634a;width:40px}100%{-webkit-transform:translate(0);transform:translate(0)}}",""]),e.exports=t},cb49:function(e,t,a){"use strict";var n=a("dbe2"),i=a.n(n);i.a},d0a9:function(e,t,a){"use strict";var n=a("8486"),i=a.n(n);i.a},d79b:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".message-list-container[data-v-ba72d52e]{width:100%;height:100%}.t-message-item[data-v-ba72d52e]{\r\n\t/*max-width: 60vw;*/padding:%?16?% 0}.t-recieve-message[data-v-ba72d52e]{display:flex;flex-direction:row;justify-items:flex-start;align-items:center;width:%?710?%}.t-self-message[data-v-ba72d52e]{display:flex;flex-direction:row;justify-content:flex-end;width:%?710?%}.t-self-message-body[data-v-ba72d52e]{display:flex;justify-content:flex-start;flex-wrap:wrap;outline:none}.t-recieve-message-body[data-v-ba72d52e]{display:flex;justify-content:flex-start;flex-wrap:wrap;outline:none;\r\n\t/*background: #F8F8F8;*/border-radius:2px 10px 10px 10px;margin-left:%?8?%}.read-receipts[data-v-ba72d52e]{line-height:42px;height:42px;font-size:12px;color:#6e7981;margin-right:10px}.no-message[data-v-ba72d52e]{text-align:center;position:fixed;width:100%;font-size:12px;color:#a5b5c1;height:40px;top:-40px;right:0}",""]),e.exports=t},dbe2:function(e,t,a){var n=a("1301");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("3f40694b",n,!0,{sourceMap:!1,shadowMode:!1})},dc61:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{audio:{}}},props:{message:{type:Object,default:function(){}},isMine:{type:Boolean,default:!0}},watch:{message:{handler:function(e){this.setData({message:e})},immediate:!0,deep:!0}},beforeMount:function(){this.audio=uni.createInnerAudioContext(),this.audio.onPlay((function(){console.log("开始播放")})),this.audio.onEnded((function(){console.log("停止播放")})),this.audio.onError((function(e){console.error(e,"onError"),uni.showToast({icon:"none",title:"该音频暂不支持播放"})}))},methods:{handlePlayAudioMessage:function(){this.audio.src=this.$javaUrl+"/"+this.message.content,this.audio.play()}}};t.default=n},eeea:function(e,t,a){"use strict";var n=a("4ea4");a("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=n(a("1da1")),o=n(a("9aa2")),s=n(a("8dc6")),r=getApp(),c={data:function(){return{conversation:{id:""},chatId:"",title:"",isShow:!1,videoPlay:!1,videoMessage:{}}},created:function(){var e=this;uni.$on("videoPlayerHandler",(function(t){e.videoPlay=t.isPlay,e.videoMessage=t.message}))},onLoad:function(e){this.chatId=e.id,this.conversation.id=e.id,this.title=e.title,this.initMessage()},methods:{stopVideoHander:function(){this.videoPlay=!1},sendMessage:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.receiver=t.chatId,a.next=3,t.$api.sendImMsg(e);case 3:n=a.sent,200==n.code&&(e.isMy=1,t.$refs.messageList.pushMessage(e));case 5:case"end":return a.stop()}}),a)})))()},initMessage:function(){if(!r.tabbar_websocket){var e=uni.getStorageSync("userInfo");r.tabbar_websocket=new o.default("".concat(s.default.tabbar_websocket,"/websocket/").concat(e.id))}r.tabbar_websocket.getWebSocketMsg(this.getWebSocketMsg)},getWebSocketMsg:function(e){e.sender===this.chatId&&(e.isMy=0,this.$refs.messageList.pushMessage(e))},triggerClose:function(){this.showChat&&this.$refs.messageInput.handleClose()},goBack:function(){}}};t.default=c},fa0e:function(e,t,a){"use strict";var n=a("4ea4");a("99af"),a("ac1f"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("2909"));a("96cf");var o=n(a("1da1")),s=n(a("2b46")),r=n(a("4ab0")),c=n(a("a9f0")),d=n(a("5108")),u={data:function(){return{avatar:"",userID:"",messageList:[],scrollView:"",scrollTop:0,triggered:!1,pageNo:1,isCompleted:!1}},components:{TextMessage:s.default,ImageMessage:c.default,VideoMessage:d.default,AudioMessage:r.default},props:{conversation:{type:Object,default:function(){}}},watch:{conversation:{handler:function(){this.getMessageList()},immediate:!0,deep:!0}},mounted:function(){},destroyed:function(){},methods:{refresh:function(){var e=this;this.isCompleted?this.setData({isCompleted:!0,triggered:!1}):(this.pageNo++,this.triggered=!0,this.getMessageList(),setTimeout((function(){e.setData({triggered:!1})}),200))},getMessageList:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isCompleted){t.next=8;break}return t.next=3,e.$api.listMessage(e.pageNo,15,e.conversation.id);case 3:a=t.sent,n=a.result.records,e.messageList=[].concat((0,i.default)(n),(0,i.default)(e.messageList)),e.isCompleted=a.result.total<=e.messageList.length,e.$handleMessageRender(e.messageList);case 8:case"end":return t.stop()}}),t)})))()},pushMessage:function(e){this.messageList.push(e),this.scrollToButtom()},$onMessageReadByPeer:function(){this.setData({messageList:this.messageList})},scrollToButtom:function(){var e=this,t=uni.createSelectorQuery().in(this),a=t.select("#message-scroll");a.boundingClientRect((function(t){e.$nextTick((function(){e.scrollTop=t.height-180}))})).exec()},$handleMessageRender:function(e){var t=this;e.length>0&&(this.setData({messageList:e},(function(){})),this.$nextTick((function(){t.scrollTop=9999})))}}};t.default=u},ff2c:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiName=t.emojiMap=t.emojiUrl=void 0;var n="https://web.sdk.qcloud.com/im/assets/emoji/";t.emojiUrl=n;var i={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[下雨]":"emoji_2@2x.png","[么么哒]":"emoji_3@2x.png","[乒乓]":"emoji_4@2x.png","[便便]":"emoji_5@2x.png","[信封]":"emoji_6@2x.png","[偷笑]":"emoji_7@2x.png","[傲慢]":"emoji_8@2x.png","[再见]":"emoji_9@2x.png","[冷汗]":"emoji_10@2x.png","[凋谢]":"emoji_11@2x.png","[刀]":"emoji_12@2x.png","[删除]":"emoji_13@2x.png","[勾引]":"emoji_14@2x.png","[发呆]":"emoji_15@2x.png","[发抖]":"emoji_16@2x.png","[可怜]":"emoji_17@2x.png","[可爱]":"emoji_18@2x.png","[右哼哼]":"emoji_19@2x.png","[右太极]":"emoji_20@2x.png","[右车头]":"emoji_21@2x.png","[吐]":"emoji_22@2x.png","[吓]":"emoji_23@2x.png","[咒骂]":"emoji_24@2x.png","[咖啡]":"emoji_25@2x.png","[啤酒]":"emoji_26@2x.png","[嘘]":"emoji_27@2x.png","[回头]":"emoji_28@2x.png","[困]":"emoji_29@2x.png","[坏笑]":"emoji_30@2x.png","[多云]":"emoji_31@2x.png","[大兵]":"emoji_32@2x.png","[大哭]":"emoji_33@2x.png","[太阳]":"emoji_34@2x.png","[奋斗]":"emoji_35@2x.png","[奶瓶]":"emoji_36@2x.png","[委屈]":"emoji_37@2x.png","[害羞]":"emoji_38@2x.png","[尴尬]":"emoji_39@2x.png","[左哼哼]":"emoji_40@2x.png","[左太极]":"emoji_41@2x.png","[左车头]":"emoji_42@2x.png","[差劲]":"emoji_43@2x.png","[弱]":"emoji_44@2x.png","[强]":"emoji_45@2x.png","[彩带]":"emoji_46@2x.png","[彩球]":"emoji_47@2x.png","[得意]":"emoji_48@2x.png","[微笑]":"emoji_49@2x.png","[心碎了]":"emoji_50@2x.png","[快哭了]":"emoji_51@2x.png","[怄火]":"emoji_52@2x.png","[怒]":"emoji_53@2x.png","[惊恐]":"emoji_54@2x.png","[惊讶]":"emoji_55@2x.png","[憨笑]":"emoji_56@2x.png","[手枪]":"emoji_57@2x.png","[打哈欠]":"emoji_58@2x.png","[抓狂]":"emoji_59@2x.png","[折磨]":"emoji_60@2x.png","[抠鼻]":"emoji_61@2x.png","[抱抱]":"emoji_62@2x.png","[抱拳]":"emoji_63@2x.png","[拳头]":"emoji_64@2x.png","[挥手]":"emoji_65@2x.png","[握手]":"emoji_66@2x.png","[撇嘴]":"emoji_67@2x.png","[擦汗]":"emoji_68@2x.png","[敲打]":"emoji_69@2x.png","[晕]":"emoji_70@2x.png","[月亮]":"emoji_71@2x.png","[棒棒糖]":"emoji_72@2x.png","[汽车]":"emoji_73@2x.png","[沙发]":"emoji_74@2x.png","[流汗]":"emoji_75@2x.png","[流泪]":"emoji_76@2x.png","[激动]":"emoji_77@2x.png","[灯泡]":"emoji_78@2x.png","[炸弹]":"emoji_79@2x.png","[熊猫]":"emoji_80@2x.png","[爆筋]":"emoji_81@2x.png","[爱你]":"emoji_82@2x.png","[爱心]":"emoji_83@2x.png","[爱情]":"emoji_84@2x.png","[猪头]":"emoji_85@2x.png","[猫咪]":"emoji_86@2x.png","[献吻]":"emoji_87@2x.png","[玫瑰]":"emoji_88@2x.png","[瓢虫]":"emoji_89@2x.png","[疑问]":"emoji_90@2x.png","[白眼]":"emoji_91@2x.png","[皮球]":"emoji_92@2x.png","[睡觉]":"emoji_93@2x.png","[磕头]":"emoji_94@2x.png","[示爱]":"emoji_95@2x.png","[礼品袋]":"emoji_96@2x.png","[礼物]":"emoji_97@2x.png","[篮球]":"emoji_98@2x.png","[米饭]":"emoji_99@2x.png","[糗大了]":"emoji_100@2x.png","[红双喜]":"emoji_101@2x.png","[红灯笼]":"emoji_102@2x.png","[纸巾]":"emoji_103@2x.png","[胜利]":"emoji_104@2x.png","[色]":"emoji_105@2x.png","[药]":"emoji_106@2x.png","[菜刀]":"emoji_107@2x.png","[蛋糕]":"emoji_108@2x.png","[蜡烛]":"emoji_109@2x.png","[街舞]":"emoji_110@2x.png","[衰]":"emoji_111@2x.png","[西瓜]":"emoji_112@2x.png","[调皮]":"emoji_113@2x.png","[象棋]":"emoji_114@2x.png","[跳绳]":"emoji_115@2x.png","[跳跳]":"emoji_116@2x.png","[车厢]":"emoji_117@2x.png","[转圈]":"emoji_118@2x.png","[鄙视]":"emoji_119@2x.png","[酷]":"emoji_120@2x.png","[钞票]":"emoji_121@2x.png","[钻戒]":"emoji_122@2x.png","[闪电]":"emoji_123@2x.png","[闭嘴]":"emoji_124@2x.png","[闹钟]":"emoji_125@2x.png","[阴险]":"emoji_126@2x.png","[难过]":"emoji_127@2x.png","[雨伞]":"emoji_128@2x.png","[青蛙]":"emoji_129@2x.png","[面条]":"emoji_130@2x.png","[鞭炮]":"emoji_131@2x.png","[风车]":"emoji_132@2x.png","[飞吻]":"emoji_133@2x.png","[飞机]":"emoji_134@2x.png","[饥饿]":"emoji_135@2x.png","[香蕉]":"emoji_136@2x.png","[骷髅]":"emoji_137@2x.png","[麦克风]":"emoji_138@2x.png","[麻将]":"emoji_139@2x.png","[鼓掌]":"emoji_140@2x.png","[龇牙]":"emoji_141@2x.png"};t.emojiMap=i;var o=["[龇牙]","[调皮]","[流汗]","[偷笑]","[再见]","[敲打]","[擦汗]","[猪头]","[玫瑰]","[流泪]","[大哭]","[嘘]","[酷]","[抓狂]","[委屈]","[便便]","[炸弹]","[菜刀]","[可爱]","[色]","[害羞]","[得意]","[吐]","[微笑]","[怒]","[尴尬]","[惊恐]","[冷汗]","[爱心]","[示爱]","[白眼]","[傲慢]","[难过]","[惊讶]","[疑问]","[困]","[么么哒]","[憨笑]","[爱情]","[衰]","[撇嘴]","[阴险]","[奋斗]","[发呆]","[右哼哼]","[抱抱]","[坏笑]","[飞吻]","[鄙视]","[晕]","[大兵]","[可怜]","[强]","[弱]","[握手]","[胜利]","[抱拳]","[凋谢]","[米饭]","[蛋糕]","[西瓜]","[啤酒]","[瓢虫]","[勾引]","[OK]","[爱你]","[咖啡]","[月亮]","[刀]","[发抖]","[差劲]","[拳头]","[心碎了]","[太阳]","[礼物]","[皮球]","[骷髅]","[挥手]","[闪电]","[饥饿]","[困]","[咒骂]","[折磨]","[抠鼻]","[鼓掌]","[糗大了]","[左哼哼]","[打哈欠]","[快哭了]","[吓]","[篮球]","[乒乓]","[NO]","[跳跳]","[怄火]","[转圈]","[磕头]","[回头]","[跳绳]","[激动]","[街舞]","[献吻]","[左太极]","[右太极]","[闭嘴]","[猫咪]","[红双喜]","[鞭炮]","[红灯笼]","[麻将]","[麦克风]","[礼品袋]","[信封]","[象棋]","[彩带]","[蜡烛]","[爆筋]","[棒棒糖]","[奶瓶]","[面条]","[香蕉]","[飞机]","[左车头]","[车厢]","[右车头]","[多云]","[下雨]","[钞票]","[熊猫]","[灯泡]","[风车]","[闹钟]","[雨伞]","[彩球]","[钻戒]","[沙发]","[纸巾]","[手枪]","[青蛙]"];t.emojiName=o}}]);